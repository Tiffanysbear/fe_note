<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.12.2 (455489)"/><meta name="author" content="Tiffany"/><meta name="created" content="2017-10-26 13:28:31 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2017-10-26 13:28:53 +0000"/><title>高性能javascript</title></head><body><div><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">1、将经常使用的对象成员、数组项、和域外变量存入局部变量</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">原因：数据存储位置对大地代码整体性能会产生重要的影响，直接变量和局部变量的访问速度快于数组和对象成员。因为局部变量位于作用域链的第一个对象中，全局变量位于作用域链的最后一环。变量在作用域链的位置越深，访问的时间就越长。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;"> </span><span style="line-height: 1.5; color: rgb(0, 128, 128); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;">1</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;"> </span><span style="line-height: 1.5; color: rgb(0, 0, 255); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;">var</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;"> doc =</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;"> document; </span><span style="line-height: 1.5; color: rgb(0, 128, 128); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;">2</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;"> </span><span style="line-height: 1.5; color: rgb(0, 0, 255); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;">var</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;"> db =</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;"> doc.body; </span><span style="line-height: 1.5; color: rgb(0, 128, 128); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;">3</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;"> </span><span style="line-height: 1.5; color: rgb(0, 0, 255); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;">var</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 12px !important; text-indent: 0px; font-family: &quot;Courier New&quot; !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); -en-paragraph: true; border: 1px solid rgb(204, 204, 204); overflow: auto;"> odiv = doc.getElementById('div1');</span><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;"> </span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">2、避免使用with表达式，因为他改变了运行期上下文的作用域链。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">3、同理with，也要注意使用try-catch，因为catch也会改变运行期上下文的作用域链。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">4、嵌套成员变量会造成重大的性能影响，尽量少用。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">5、DOM操作量化问题：</span></div><div style="padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background-color: rgb(245, 245, 245);"><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7CBFD468-3EA4-4FCA-B729-F1941E90D147.gif" height="20" width="20"/></div><div style="padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">　　//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">在循坏中更新页面，问题所在：每次循环都对DOM元素访问了两次，一次是读取document.getElementById('here').innerHTML的内容，一次是修改它。</span></div><div>    <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">function</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> changeDOM(){</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">        </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">for</span>(<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> i=0; i &lt; 15000; i++<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">){</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">        document.getElementById(</span>'here').innerHTML += 'a'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">       }</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);" /></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">   }    </span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">      </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">改变方法，使用局部变量存好改变量，在循环结束时一并修改</span></div><div>      <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">function</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> changeDOM(){</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">        </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> content =''<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">；</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">        </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">for</span>(<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> i=0; i &lt; 15000; i++<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">){</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">            content </span>+= 'a'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">        }</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">       document.getElementById(</span>'here').innerHTML +=<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> content;</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">    }</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">    </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">关于js字符串拼接的性能优化问题，js的处理机制是：新建一个临时字符串，将新字符串赋值为 content + 'a' ,然后返回这个新字符串并同时销毁原始字符串。导致字符串的连接效率较低的重要原因不仅在于对于新的临时变量的不断创建，还有js的垃圾回收机制下不断在对象创建期间回收，导致的效率低下。提高效率的办法是用数组的join函数：</span></div><div>        <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">function</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> changeDOM(){</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">          </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> content =<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">[]；</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">          </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">for</span>(<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> i=0; i &lt; 15000; i++<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">){</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">              content.push(</span>'a'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">          }</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">         document.getElementById(</span>'here').innerHTML += content.join(''<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">      }</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">    </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">但是同时也要注意，后来的大部分浏览器都对“+”的连接字符串做了优化，由于SpiderMonkey等引擎对字符串的“+”运算做了优化，结果使用Array.join的效率反而不如直接用“+”！，因此建议是：在IE7以下，使用join，在新浏览器下，除了变量缓存外，不需要做别的优化</span></div><div>　　　　　　</div></div><div style="padding: 0px; background-color: rgb(245, 245, 245);"><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7CBFD468-3EA4-4FCA-B729-F1941E90D147.gif" height="20" width="20"/></div></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;"> </span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">6、克隆已有的DOM元素，即element.cloneNode(),比起新建节点来说，即element.createElement()，会快一点，但是性能提高不是很大。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">7、遍历数组明显快于同样大小和内容的HTML集合</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">8、 for循环时，HTML某元素集合的长度不建议直接作为循环终止条件，最好将集合的长度赋给一个变量，然后使用变量作为循环终止条件；</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">原因：当每次迭代过程访问集合的length时，它导致集合器更新，在所有的浏览器上都会产生明显的性能损失。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">9、需要考虑实际情况的优化，根据7，可以将集合中的元素通过for循坏赋值到数组中，访问数组的数组快于集合。但是要注意对于复制的开销是否值得。</span></div><div style="padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background-color: rgb(245, 245, 245);"><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7CBFD468-3EA4-4FCA-B729-F1941E90D147.gif" height="20" width="20"/></div><div style="padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">1</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">function</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> toArray(collection){</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">2</span>         <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> arr =<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> [];</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">3</span>         <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> clen =<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> collection.length;</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">4</span>         <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">for</span>(<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> i= 0; i &lt; clen; i++<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">){</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">5</span>             arr[i] =<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> collection[i];</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">6</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">        }</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">7</span> </div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">8</span>     }</div></div><div style="padding: 0px; background-color: rgb(245, 245, 245);"><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7CBFD468-3EA4-4FCA-B729-F1941E90D147.gif" height="20" width="20"/></div></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">10、获取DOM节点，使用nextSibling方式与childNodes方式，在不同的浏览器中，这两种方法的时间基本相等。但是在IE中，nextSibling比childNodes好，IE6下，nextSibling比对手快16倍，在IE7下，快105倍。因此，在老的IE中性能严苛的使用条件下，用nextSibling较好。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">11、querySelectorAll()可以联合查询，即querySelectorAll(‘div .warning，div .notice’),在各大浏览器中支持也挺好的，还可以过滤很多非元素节点；</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">       </span><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/2952B607-D574-420B-AEA0-A363DF6494E4.png" height="564" width="1241"/></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">ps：这个网站是：</span><a style="line-height: 1.5; color: rgb(7, 93, 179); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; text-decoration: underline;" href="http://caniuse.com/">http://caniuse.com/</a><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">，可以检查HTML、CSS元素在各大浏览器的兼容情况，一个很有用的网站！</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">-------------2016-7-21更---------------</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">12、重绘和重排版；</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">重绘：不需要改变元素的长度和宽度，不影响DOM的几何属性；</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">重排版：影响了几何属性，需要重新计算元素的几何属性，而且其他元素的几何属性有可能也会受影响。浏览器会在重排版过程中，重新绘制屏幕上受影响的部分。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">获取布局信息的操作将导致刷新队列的动作，如使用：offsetTop、offsetLeft、offsetWidth、offsetHeight、scrollTop、scrollLeft、scrollWidth、clientTop、clientLeft、clientHeight、geteComputedStyle()(在IE中此函数成为currentStyle)；浏览器此时不得不进行渲染队列中带改变的项目，并重新排版以返回正确值。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">解决办法：</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">a、通过延迟访问布局信息避免重排版。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">b、整体修改cssText的css代码，而不是分开访问，修改cssText的属性</span></div><div style="padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background-color: rgb(245, 245, 245);"><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7CBFD468-3EA4-4FCA-B729-F1941E90D147.gif" height="20" width="20"/></div><div style="padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">1</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">访问了4次DOM，第二次开始重排列并强迫渲染队列执行</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">2</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> el = document.getElementById('div1'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">3</span>     el.style.borderLeft = '1px'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">4</span>     el.style.borderRight = '2px'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">5</span>     el.style.padding = '5px'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">6</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">改进：改变合并，通过cssText实现</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">7</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> el = document.getElementById('div1'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">8</span>     el.cssText += 'border-left = 1px;border-right = 2px;padding = 5px;';</div></div><div style="padding: 0px; background-color: rgb(245, 245, 245);"><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7CBFD468-3EA4-4FCA-B729-F1941E90D147.gif" height="20" width="20"/></div></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">c、改变css类名来实现样式改变</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">d、当对DOM元素进行多次修改时，可以通过以下的步骤减少重绘和重排版的次数：</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); -en-paragraph: true;">(注意：此过程引发两次重排版，第一次引发一次，第三次引发一次。如果没有此步骤的话，每次对第二步的改变都有可能带来重排版。)</span></div><ol style="padding: 0px 0px 0px 40px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);"><li style=" padding: 0px; list-style: decimal;">从文档流中摘除该元素，摘除该元素的方法有：</li><ol style=" padding: 0px 0px 0px 40px;"><li style=" padding: 0px; list-style: decimal;">使其隐藏，进行修改后在显示</li><li style=" padding: 0px; list-style: decimal;">使用文档片段创建子树，在将他拷贝进文档<br/><div style="padding: 0px; background-color: rgb(245, 245, 245);"><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7CBFD468-3EA4-4FCA-B729-F1941E90D147.gif" height="20" width="20"/></div><div style=" padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">1</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> doc =<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> document;</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">2</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">创建文档子树</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">3</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> frag =<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> doc.createDocumentFragment();</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">4</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">自定义函数，将修改内容data赋给文档片段frag，具体过程忽略</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">5</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">    appendDataToElement(frag,data);</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">6</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">注意：添加时实际添加的是文档片段的子节点群，而不是frag自己，只会引发一次重排版</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">7</span>     doc.getElementById('div1').appendChild(frag);</div></div><div style="padding: 0px; background-color: rgb(245, 245, 245);"><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7CBFD468-3EA4-4FCA-B729-F1941E90D147.gif" height="20" width="20"/></div><br/><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; -en-paragraph: true;"> </span></li><li style=" padding: 0px; list-style: decimal;">创建一个节点的副本，在副本上进行修改，再让复制节点覆盖原先节点<br/><div style=" padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div>    <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);"> 创建一个节点的副本，在副本上进行修改，再让复制节点覆盖原先节点</span></div><div>    <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> oldNode = document.getElementById('old'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">    </span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> clone =<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> old.cloneNode();</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">    appendDataToElement(clone,data);</span></div><div><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">    oldNode.replaceChild(clone,oldNode);</span></div></div><br/><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; -en-paragraph: true;">ps：推荐第二种，因为其涉及最少数量的操作和重排列。</span></li></ol><li style=" padding: 0px; list-style: decimal;">对其应用多重改变</li><li style=" padding: 0px; list-style: decimal;">将元素带回文档中</li></ol><div><br/></div>


</body></html>