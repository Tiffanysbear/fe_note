<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.12.2 (455489)"/><meta name="author" content="Tiffany"/><meta name="created" content="2017-10-26 13:28:31 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2017-10-26 13:37:01 +0000"/><title>高性能javascript</title></head><body><div><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">14、减少对布局信息的查询次数，查询时将他赋值给局部变量参与计算。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">例子，在元素网右下方不断平移时，在timeout中可以写：</span></div><div style="padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: 'Courier New' !important; font-size: 12px !important;"><div style="padding: 0px;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/E0A9EB81-D3AD-4A0C-8363-F6A6D2C4C080.gif" height="20" width="20"/></span></div><div style="padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important; font-size: 12px !important;"><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">1</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> current =<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> myElement.offsetLeft;</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">2</span>     current++<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">3</span>     myElement.style.left = current + 'px'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">4</span>     myElement.style.top =  current + 'px'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">5</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">if</span>(current &gt; 500<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">){</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">6</span>         <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">stop animation</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">7</span>     }</span></div></div><div style="padding: 0px;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/E0A9EB81-D3AD-4A0C-8363-F6A6D2C4C080.gif" height="20" width="20"/></span></div></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">//拒绝下面的写法，每次移动都会查询一次偏移量，导致浏览器刷新渲染队列，非常耗时</span></div><div style="padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: 'Courier New' !important; font-size: 12px !important;"><div style="padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important; font-size: 12px !important;"><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">1</span>     myElement.style.left = myElement.offsetLeft + 'px'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">2</span>     myElement.style.top =  myElement.offsetLeft + 'px'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">;</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">3</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">if</span>(myElement.offsetLeft &gt; 500<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">){</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">4</span>         <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">stop animation</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">5</span>     }</span></div></div></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">15、大量的元素使用：hover之后，页面性能将降低，特别是IE8中。因此强烈建议，在数据量很大的表格中，减少鼠标在表上移动效果，减少高亮行的显示，使用高亮是个慢速过程CPU使用率会提高到80%-90%，尽量避免使用这种效果。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">16、事件托管</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">讲到事件托管，首先我们来看一看冒泡机制：</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">DOM2级事件规定事件包括三个阶段： ① 事件捕获阶段 ② 处于目标阶段 ③ 事件冒泡阶段</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/7B7654CC-BA7C-49DA-BC1C-77D6A158B03B.png" height="592" width="710"/></span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style=""><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">图片引用来源：<a href="http://www">http://www</a>.</span><a style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;" href="http://w3.org/TR/DOM-Level-3-Events/#event-flow">w3.org/TR/DOM-Level-3-Events/#event-flow</a></span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">如下图的实验结果可以知道，当我们点击了inner之后，捕获和冒泡结果如上图的规律相同；</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/8F8F14BC-D7B7-4912-9470-B24AF7D5DB77.png" height="372" width="642"/></span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">因此，因为每一个元素有一个或多个事件句柄与之相连时，可能会影响性能，毕竟连接每一个句柄都是有代价的，所以我们采用事件托管技术，在一个包装元素上挂接一个句柄，用于处理子元素发生的所有事件。</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">下面我们以如下的dom结构为例：</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">假如有一个ul，下面有很多个li：</span></div><div style="padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: 'Courier New' !important; font-size: 12px !important;"><div style="padding: 0px;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/E0A9EB81-D3AD-4A0C-8363-F6A6D2C4C080.gif" height="20" width="20"/></span></div><div style="padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">1</span>     &lt;div&gt;</span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">2</span>         &lt;ul id="ulList"&gt;</span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">3</span>             &lt;li id="item1"&gt;&lt;/li&gt;</span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">4</span>             &lt;li id="item2"&gt;&lt;/li&gt;</span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">5</span>             &lt;li id="item3"&gt;&lt;/li&gt;</span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">6</span>             &lt;li id="item4"&gt;&lt;/li&gt;</span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">7</span>             &lt;li id="item5"&gt;&lt;/li&gt;</span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">8</span>         &lt;/ul&gt;</span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">9</span>     &lt;/div&gt;</span></div></div><div style="padding: 0px;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/E0A9EB81-D3AD-4A0C-8363-F6A6D2C4C080.gif" height="20" width="20"/></span></div></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">当某个Li被点击的时候需要触发相应的处理事件。我们通常的写法，是为每个Li都添加onClick的事件监听。</span></div><div style="padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: 'Courier New' !important; font-size: 12px !important;"><div style="padding: 0px;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/E0A9EB81-D3AD-4A0C-8363-F6A6D2C4C080.gif" height="20" width="20"/></span></div><div style="padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 1</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">function</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> addListenersLi(liNode){</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 2</span>     liNode.onclick = <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">function</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> clickHandler(){}</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 3</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">}</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 4</span> </span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 5</span> window.onload = <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">function</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">(){</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 6</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> ulNode = document.getElementById("ulList"<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 7</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> liNodes = ulNode.getElementByTagName("li"<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 8</span>     <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">for</span>(<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> i=0, l = liNodes.length; i &lt; l; i++<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">){</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 9</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">        addListeners4Li(liNodes[i]);</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">10</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">    }   </span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">11</span> }</span></div></div><div style="padding: 0px;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/E0A9EB81-D3AD-4A0C-8363-F6A6D2C4C080.gif" height="20" width="20"/></span></div></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">如果li足够多，或者对于li的操作特别频繁，为每一个li绑定一个点击事件将会特别影响性能，因为在此期间，你需要访问和修改更多的DOM节点，事件的绑定过程发生在onload事件中，绑定本身也非常耗时；同时，浏览器需要保存每个句柄的记录，很占用内存。重点是有些绑定了还不一定会用着，并不是100%的按钮或链接都会被点到的哟！</span></div><div style="padding: 0px; line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="line-height: 1.5; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">因此，采用事件托管更为高效，当事件被抛到更上层的父节点的时候，我们通过检查事件的目标对象（target）来判断并获取事件源Li。下面的代码可以完成我们想要的效果：</span></div><div><div style="padding: 0px;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/E0A9EB81-D3AD-4A0C-8363-F6A6D2C4C080.gif" height="20" width="20"/></span></div><div style="padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 1</span>         <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> oul = document.getElementById('ulList'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 2</span>         oul.addEventListener('click',<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">function</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">(e){</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 3</span>             <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> e = e ||<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> window.event;</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 4</span>             <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">var</span> target = e.target ||<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);"> e.srcElement;</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 5</span> </span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 6</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">            console.log(target.nodeName);</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 7</span>             <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">if</span>(target.nodeName == 'LI'<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">){</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 8</span>                 <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">//</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 0);">事件真正的处理程序</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);"> 9</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">                alert(target.id);</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">10</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">                e.preventDefault();</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">11</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">                e.stopPropagation();</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">12</span>             }<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 255);">else</span><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">{</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">13</span>                 alert(456<span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">);</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">14</span> <span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 0, 0);">            }</span></span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">15</span> </span></div><div><span style=""><span style="font-family: &quot;Courier New&quot; !important; font-size: 12px !important; line-height: 1.5; color: rgb(0, 128, 128);">16</span>         });</span></div></div><div style="padding: 0px;"><span style=""><img src="%E9%AB%98%E6%80%A7%E8%83%BDjavascript.resources/E0A9EB81-D3AD-4A0C-8363-F6A6D2C4C080.gif" height="20" width="20"/></span></div></div><div><br/></div></body></html>